{"ast":null,"code":"import { useState, useEffect } from 'react';\n\nconst useForm = (validate, runOnSubmit) => {\n  const [values, setValues] = useState({});\n  const [errors, setErrors] = useState({});\n  const [touched, setTouched] = useState([]);\n  const [isSubmitting, setSubmitting] = useState(false);\n  useEffect(() => {\n    if (isSubmitting) {\n      const noErrors = Object.keys(errors).length === 0;\n\n      if (noErrors) {\n        setTouched([]);\n        runOnSubmit();\n        setSubmitting(false);\n      } else {\n        setSubmitting(false);\n      }\n    }\n  }, [errors]);\n  useEffect(() => {\n    const validationErrors = validate(values);\n    const touchedErrors = Object.keys(validationErrors).filter(key => touched.includes(key)).reduce((acc, key) => {\n      if (!acc[key]) {\n        acc[key] = validationErrors[key];\n      }\n\n      return acc;\n    }, {});\n    setErrors(touchedErrors);\n  }, [touched, values]);\n\n  const handleChange = event => value => {\n    // event.persist();\n    setValues(values => ({ ...values,\n      [event.target.name]: value\n    })); // setValues(values => ({...values, [key]: value}))\n  };\n\n  const handleBlur = event => {\n    if (!touched.includes(event.target.name)) {\n      setTouched([...touched, event.target.name]);\n    }\n  };\n\n  const handleCheckBox = 45;\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    const validationErrors = validate(values);\n    setErrors(validationErrors);\n    setSubmitting(true);\n  };\n\n  return {\n    handleSubmit,\n    handleChange,\n    handleBlur,\n    values,\n    errors,\n    isSubmitting,\n    setValues\n  };\n};\n\nexport default useForm;","map":{"version":3,"sources":["/Users/anishniroula/Documents/todo/src/useForm.js"],"names":["useState","useEffect","useForm","validate","runOnSubmit","values","setValues","errors","setErrors","touched","setTouched","isSubmitting","setSubmitting","noErrors","Object","keys","length","validationErrors","touchedErrors","filter","key","includes","reduce","acc","handleChange","event","value","target","name","handleBlur","handleCheckBox","handleSubmit","preventDefault"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;;AAEA,MAAMC,OAAO,GAAG,CAACC,QAAD,EAAWC,WAAX,KAA2B;AACvC,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBN,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAACO,MAAD,EAASC,SAAT,IAAsBR,QAAQ,CAAC,EAAD,CAApC;AAEA,QAAM,CAACS,OAAD,EAAUC,UAAV,IAAwBV,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAACW,YAAD,EAAeC,aAAf,IAAgCZ,QAAQ,CAAC,KAAD,CAA9C;AAGAC,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIU,YAAJ,EAAkB;AACd,YAAME,QAAQ,GAAGC,MAAM,CAACC,IAAP,CAAYR,MAAZ,EAAoBS,MAApB,KAA+B,CAAhD;;AACA,UAAIH,QAAJ,EAAc;AACVH,QAAAA,UAAU,CAAC,EAAD,CAAV;AACAN,QAAAA,WAAW;AACXQ,QAAAA,aAAa,CAAC,KAAD,CAAb;AACH,OAJD,MAIO;AACHA,QAAAA,aAAa,CAAC,KAAD,CAAb;AACH;AACJ;AACJ,GAXQ,EAWN,CAACL,MAAD,CAXM,CAAT;AAaAN,EAAAA,SAAS,CAAC,MAAM;AACZ,UAAMgB,gBAAgB,GAAGd,QAAQ,CAACE,MAAD,CAAjC;AACA,UAAMa,aAAa,GAAGJ,MAAM,CAACC,IAAP,CAAYE,gBAAZ,EACjBE,MADiB,CACVC,GAAG,IAAIX,OAAO,CAACY,QAAR,CAAiBD,GAAjB,CADG,EAEjBE,MAFiB,CAEV,CAACC,GAAD,EAAMH,GAAN,KAAc;AAClB,UAAI,CAACG,GAAG,CAACH,GAAD,CAAR,EAAe;AACXG,QAAAA,GAAG,CAACH,GAAD,CAAH,GAAWH,gBAAgB,CAACG,GAAD,CAA3B;AACH;;AACD,aAAOG,GAAP;AACH,KAPiB,EAOf,EAPe,CAAtB;AAQAf,IAAAA,SAAS,CAACU,aAAD,CAAT;AACH,GAXQ,EAWN,CAACT,OAAD,EAAUJ,MAAV,CAXM,CAAT;;AAcA,QAAMmB,YAAY,GAAIC,KAAD,IAAYC,KAAD,IAAW;AACvC;AACApB,IAAAA,SAAS,CAACD,MAAM,KAAK,EAAE,GAAGA,MAAL;AAAa,OAACoB,KAAK,CAACE,MAAN,CAAaC,IAAd,GAAqBF;AAAlC,KAAL,CAAP,CAAT,CAFuC,CAGvC;AACH,GAJD;;AAMA,QAAMG,UAAU,GAAIJ,KAAD,IAAW;AAC1B,QAAI,CAAChB,OAAO,CAACY,QAAR,CAAiBI,KAAK,CAACE,MAAN,CAAaC,IAA9B,CAAL,EAA0C;AACtClB,MAAAA,UAAU,CAAC,CACP,GAAGD,OADI,EAEPgB,KAAK,CAACE,MAAN,CAAaC,IAFN,CAAD,CAAV;AAIH;AACJ,GAPD;;AASA,QAAME,cAAc,GAAG,EAAvB;;AAGA,QAAMC,YAAY,GAAIN,KAAD,IAAW;AAC5BA,IAAAA,KAAK,CAACO,cAAN;AACA,UAAMf,gBAAgB,GAAGd,QAAQ,CAACE,MAAD,CAAjC;AACAG,IAAAA,SAAS,CAACS,gBAAD,CAAT;AACAL,IAAAA,aAAa,CAAC,IAAD,CAAb;AACH,GALD;;AAQA,SAAO;AACHmB,IAAAA,YADG;AAEHP,IAAAA,YAFG;AAGHK,IAAAA,UAHG;AAIHxB,IAAAA,MAJG;AAKHE,IAAAA,MALG;AAMHI,IAAAA,YANG;AAOHL,IAAAA;AAPG,GAAP;AASH,CAtED;;AAwEA,eAAeJ,OAAf","sourcesContent":["import { useState, useEffect } from 'react';\n\nconst useForm = (validate, runOnSubmit) => {\n    const [values, setValues] = useState({});\n    const [errors, setErrors] = useState({});\n\n    const [touched, setTouched] = useState([]);\n    const [isSubmitting, setSubmitting] = useState(false);\n\n\n    useEffect(() => {\n        if (isSubmitting) {\n            const noErrors = Object.keys(errors).length === 0;\n            if (noErrors) {\n                setTouched([]);\n                runOnSubmit();\n                setSubmitting(false);\n            } else {\n                setSubmitting(false);\n            }\n        }\n    }, [errors]);\n\n    useEffect(() => {\n        const validationErrors = validate(values);\n        const touchedErrors = Object.keys(validationErrors)\n            .filter(key => touched.includes(key))\n            .reduce((acc, key) => {\n                if (!acc[key]) {\n                    acc[key] = validationErrors[key]\n                }\n                return acc\n            }, {});\n        setErrors(touchedErrors);\n    }, [touched, values]);\n\n\n    const handleChange = (event) => (value) => {\n        // event.persist();\n        setValues(values => ({ ...values, [event.target.name]: value }));\n        // setValues(values => ({...values, [key]: value}))\n    };\n\n    const handleBlur = (event) => {\n        if (!touched.includes(event.target.name)) {\n            setTouched([\n                ...touched,\n                event.target.name\n            ])\n        }\n    };\n\n    const handleCheckBox = 45;\n\n\n    const handleSubmit = (event) => {\n        event.preventDefault();\n        const validationErrors = validate(values);\n        setErrors(validationErrors);\n        setSubmitting(true);\n    };\n\n\n    return {\n        handleSubmit,\n        handleChange,\n        handleBlur,\n        values,\n        errors,\n        isSubmitting,\n        setValues\n    };\n};\n\nexport default useForm;\n"]},"metadata":{},"sourceType":"module"}