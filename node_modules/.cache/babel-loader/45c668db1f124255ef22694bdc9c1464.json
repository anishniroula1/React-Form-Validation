{"ast":null,"code":"'use strict';\n\nvar _remotedev = require('remotedev');\n\nvar _remotedev2 = _interopRequireDefault(_remotedev);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction getActionName(actionName, state) {\n  if (typeof actionName === 'function') {\n    return actionName(state);\n  }\n\n  return actionName;\n}\n\nfunction connectToDevTools(instance) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!instance) {\n    console.error('Please provide react instance as argument of `remotedev-react-state`.');\n  }\n\n  options.name = options.name || instance.constructor && 'Component - ' + (instance.constructor.name || 'Unknown');\n\n  var devtools = _remotedev2.default.connectViaExtension(options);\n\n  var initialState = Object.assign({}, instance.state);\n  devtools.init(initialState);\n  var originSetState = instance.setState;\n\n  instance.setState = function setState(state, callback) {\n    var _this = this;\n\n    return originSetState.call(this, state, function () {\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      devtools.send({\n        type: getActionName(options.actionName, _this.state) || 'State change',\n        state: _this.state\n      }, _this.state);\n\n      if (callback) {\n        callback.apply(_this, args);\n      }\n    });\n  };\n\n  var unsubscribe = devtools.subscribe(function (message) {\n    if (message.type !== 'DISPATCH') return;\n\n    switch (message.payload.type) {\n      case 'COMMIT':\n        return devtools.init(_remotedev2.default.extractState(message));\n\n      case 'RESET':\n        devtools.init(initialState);\n        return originSetState.call(instance, initialState);\n\n      case 'ROLLBACK':\n        return devtools.init(_remotedev2.default.extractState(message));\n\n      case 'JUMP_TO_STATE':\n      case 'JUMP_TO_ACTION':\n        originSetState.call(instance, _remotedev2.default.extractState(message));\n    }\n  });\n  var originCWUM = instance.componentWillUnMount;\n\n  instance.componentWillUnMount = function () {\n    unsubscribe();\n    originCWUM.call(instance);\n  };\n}\n/**\n * Create `connectToDevTools` function can be used for component `ref` prop.\n * \n * Example:\n *   <App ref={connectToDevTools.ref(options)} />\n */\n\n\nconnectToDevTools.ref = function (options) {\n  return function (ref) {\n    return connectToDevTools(ref, options);\n  };\n};\n\nmodule.exports = connectToDevTools;","map":{"version":3,"sources":["/Users/anishniroula/Documents/todo/node_modules/remotedev-react-state/lib/index.js"],"names":["_remotedev","require","_remotedev2","_interopRequireDefault","obj","__esModule","default","getActionName","actionName","state","connectToDevTools","instance","options","arguments","length","undefined","console","error","name","constructor","devtools","connectViaExtension","initialState","Object","assign","init","originSetState","setState","callback","_this","call","_len","args","Array","_key","send","type","apply","unsubscribe","subscribe","message","payload","extractState","originCWUM","componentWillUnMount","ref","module","exports"],"mappings":"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","sourcesContent":["'use strict';\n\nvar _remotedev = require('remotedev');\n\nvar _remotedev2 = _interopRequireDefault(_remotedev);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction getActionName(actionName, state) {\n  if (typeof actionName === 'function') {\n    return actionName(state);\n  }\n  return actionName;\n}\n\nfunction connectToDevTools(instance) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!instance) {\n    console.error('Please provide react instance as argument of `remotedev-react-state`.');\n  }\n  options.name = options.name || instance.constructor && 'Component - ' + (instance.constructor.name || 'Unknown');\n\n  var devtools = _remotedev2.default.connectViaExtension(options);\n  var initialState = Object.assign({}, instance.state);\n\n  devtools.init(initialState);\n\n  var originSetState = instance.setState;\n  instance.setState = function setState(state, callback) {\n    var _this = this;\n\n    return originSetState.call(this, state, function () {\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      devtools.send({\n        type: getActionName(options.actionName, _this.state) || 'State change',\n        state: _this.state\n      }, _this.state);\n      if (callback) {\n        callback.apply(_this, args);\n      }\n    });\n  };\n\n  var unsubscribe = devtools.subscribe(function (message) {\n    if (message.type !== 'DISPATCH') return;\n    switch (message.payload.type) {\n      case 'COMMIT':\n        return devtools.init(_remotedev2.default.extractState(message));\n      case 'RESET':\n        devtools.init(initialState);\n        return originSetState.call(instance, initialState);\n      case 'ROLLBACK':\n        return devtools.init(_remotedev2.default.extractState(message));\n      case 'JUMP_TO_STATE':\n      case 'JUMP_TO_ACTION':\n        originSetState.call(instance, _remotedev2.default.extractState(message));\n    }\n  });\n\n  var originCWUM = instance.componentWillUnMount;\n  instance.componentWillUnMount = function () {\n    unsubscribe();\n    originCWUM.call(instance);\n  };\n}\n\n/**\n * Create `connectToDevTools` function can be used for component `ref` prop.\n * \n * Example:\n *   <App ref={connectToDevTools.ref(options)} />\n */\nconnectToDevTools.ref = function (options) {\n  return function (ref) {\n    return connectToDevTools(ref, options);\n  };\n};\n\nmodule.exports = connectToDevTools;"]},"metadata":{},"sourceType":"script"}